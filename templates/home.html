{% extends "base.html" %}
{% block title %}Tuition Portal - Home{% endblock %}

{% block content %}
<div class="container my-5">
  <h1 class="text-center mb-4">Welcome to Tuition Portal</h1>

  <p class="lead text-center">
    Your one-stop platform to find or offer tuition/classes easily.
  </p>

  <section class="mb-5">
    <h2>About Tuition Portal</h2>
    <p>
      Tuition Portal connects students and tutors seamlessly. Students can post tuition requirements, search for tutors, register easily, and manage their requests.
      Tutors can register, showcase their skills, and find matching tuition opportunities.
    </p>
  </section>

  <section class="row text-center">
    <div class="col-md-6 mb-3">
      <h3>Register</h3>
      <a href="{{ url_for('student_register') }}" class="btn btn-primary mb-2">Student Registration</a><br>
      <a href="{{ url_for('tutor_register') }}" class="btn btn-secondary">Tutor Registration</a>
    </div>
    <div class="col-md-6 mb-3">
      <h3>Login</h3>
      <a href="{{ url_for('student_login') }}" class="btn btn-primary mb-2">Student Login</a><br>
      <a href="{{ url_for('tutor_login') }}" class="btn btn-secondary">Tutor Login</a>
    </div>
  </section>

  <section class="mt-5">
    <h2 class="mb-4">Posted Tuition Requirements</h2>
    {% if tuition_requirements %}
    <div class="row">
      {% for req in tuition_requirements[:9] %}
      <div class="col-md-4 mb-4">
        <div class="card shadow-sm border-primary h-100" style="background: linear-gradient(135deg, #3aafc6 0%, #2a7f92 100%);">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title text-white">{{ req.student.name }}</h5>
            <p class="card-text text-white">
              <strong>Subject:</strong> {{ req.subject }}<br>
              <strong>Class:</strong> {{ req.student_class }}<br>
              <strong>Mode:</strong> {{ req.mode|capitalize }}<br>
              <strong>Posted On:</strong> {{ req.created_at.strftime('%Y-%m-%d %H:%M') }}
            </p>
            <p class="card-text text-white small mt-auto">
              <strong>Email:</strong> {{ req.student.email[:2] ~ '***@***' }}<br>
              <strong>Mobile:</strong> {{ req.student.phone[:2] ~ '******' }}<br>
              <strong>Address:</strong>
              {% if req.mode == 'offline' %}
                {{ req.address[:6] ~ '******' }}
              {% else %}
                N/A
              {% endif %}
            </p>
            {% if session.get('tutor_id') %}
            <a href="{{ url_for('payment', req_id=req.id) }}" class="btn btn-light mt-3">Contact Student</a>
            {% else %}
            <a href="{{ url_for('tutor_login') }}" class="btn btn-light mt-3">Contact Student</a>
            {% endif %}
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
    <div class="text-center mt-4">
      <a href="{{ url_for('all_requirements') }}" class="btn btn-outline-primary">Show All Requirements</a>
    </div>
    {% else %}
      <div class="alert alert-info">No tuition requirements posted yet.</div>
    {% endif %}
  </section>
</div>
{% endblock %}
